## 条件测试

### 1 if/else/fi

### 2 test和`[`

test和`[`是等价命令，它们常用来：

* 测试文件类型。`[ -f filename]` 测试filename是否是一个文件。
* 判断字符串。`[ -n str]` 判断字符串str的长度是否为0。
* 判断整数。`[ n1 -eq n2 ]` 判断整数n1和n2是否相等。

多个条件组合：
* 并且。con1 -a con2
* 或者。con1 -o con2

使用场景：

* 文件类型及属性测试
* 字符串测试
* 整数比较测试(使用-eq、-lt等)

### 3 `[[`

在`[[`和`]]`结构之间可以使用&&、||、<、>等操作符，而在`[`中不能使用。

使用场景：

* 采用跟其它编程语言类似的语法

### 4 `(())`、let和expr

`(())`和let一样，都可以用于计算一个算术表达式的值，并且可以相互替换，但是，`(())`常用于条件测试，而let则用于计算表达式的值。并且，它们都会返回结果状态，如果表达式的值为0，那么返回的退出状态码为1，表示`假`。如果表达式的值不为0，返回的退出状态码为0，表示`真`。其中的表达式可以是计算型，也可以是比较型。

expr是一个命令行的计算器，用于算术运算。常用的方法如下所示：

```shell
x=4
x=`expr $x + 1`
```

需要注意两个地方：

* 脚本中使用时，通常要取expr命令的结果。
* expr命令中的操作符的两边必须有空格。

使用场景：

* 算术表达式的结果测试

### 5 需要注意的几个问题

#### 5.1 `=`

在使用等号进行比较时，需要采用以下形式：

```shell
A=abc
if [ "$A"x = "abc"x ]
then
	echo "haha"
fi
```

上面的代码要注意两个地方：

* 进行比较时，建议对变量加上双引号。如果没有加上，在有些情况(例如，A="a=b"，[ $A ]，本意是判断字符串是否为空，结果成了两个比较a和b)下会出问题。
* 进行比较时，在两边添加x，这用于当A为空的情况。不过，貌似这个已经不是问题了，当A为空，不加x也可以正常运行。

#### 5.2 `==`

一般来说，=和==在用于比较时是一样的，但是，如果有file globbing(文件名通配符)和word splitting(单词分割)，则使用`[]`和`[[]]`是不一样的。

```shell
A=abc
[ "$A" == a* ] # 返回1
[ "$A" == "a*" ] # 返回1
[[ "$A" == a* ]] # 返回0
[[ "$A" == "a*" ]] # 返回1
```

`*`是linux里面的通配符，但是，在上面的例子中，只有在使用`[[]]`且不加双引号时，才会使用通配符的含义(变量A是否以a开头)，其它都忽略通配符的含义，而将`*`当作普通字符看待。

### 6 总结



### 附录

* 关键字：
* 命令：
* 内建命令：